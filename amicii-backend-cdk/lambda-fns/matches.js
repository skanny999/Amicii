"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const db_1 = require("./db");
const sqlCommands_1 = require("./sqlCommands");
async function matches(userId) {
    const db = await db_1.getDB();
    const allMatchesIds = await db.$queryRaw(sqlCommands_1.matchesQuery(userId));
    const allMatches = await db.user.findMany({
        where: {
            id: {
                in: allMatchesIds.map((item) => item.ID)
            }
        }
    });
    return allMatches;
}
exports.default = matches;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2hlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1hdGNoZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNEI7QUFDNUIsK0NBQTRDO0FBRTVDLEtBQUssVUFBVSxPQUFPLENBQUMsTUFBYztJQUNqQyxNQUFNLEVBQUUsR0FBRyxNQUFNLFVBQUssRUFBRSxDQUFBO0lBQ3hCLE1BQU0sYUFBYSxHQUFHLE1BQU0sRUFBRSxDQUFDLFNBQVMsQ0FBQywwQkFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7SUFDOUQsTUFBTSxVQUFVLEdBQUcsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN0QyxLQUFLLEVBQUU7WUFDSCxFQUFFLEVBQUU7Z0JBQ0EsRUFBRSxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFvQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2FBQzNEO1NBQ0o7S0FDSixDQUFDLENBQUE7SUFDRixPQUFPLFVBQVUsQ0FBQTtBQUNyQixDQUFDO0FBRUQsa0JBQWUsT0FBTyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0REIgfSBmcm9tICcuL2RiJ1xuaW1wb3J0IHsgbWF0Y2hlc1F1ZXJ5IH0gZnJvbSAnLi9zcWxDb21tYW5kcydcblxuYXN5bmMgZnVuY3Rpb24gbWF0Y2hlcyh1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0REIoKVxuICAgIGNvbnN0IGFsbE1hdGNoZXNJZHMgPSBhd2FpdCBkYi4kcXVlcnlSYXcobWF0Y2hlc1F1ZXJ5KHVzZXJJZCkpXG4gICAgY29uc3QgYWxsTWF0Y2hlcyA9IGF3YWl0IGRiLnVzZXIuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZTogeyBcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgICAgaW46IGFsbE1hdGNoZXNJZHMubWFwKChpdGVtOiB7IElEOiBzdHJpbmcgfSkgPT4gaXRlbS5JRClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGFsbE1hdGNoZXNcbn1cblxuZXhwb3J0IGRlZmF1bHQgbWF0Y2hlcyJdfQ==