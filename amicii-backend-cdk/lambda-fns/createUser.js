"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// import db from './db'
const db_1 = require("./db");
const { v4: uuid } = require('uuid');
async function createUser(user) {
    const db = await db_1.getDB();
    if (!user.id)
        user.id = uuid();
    const { id, username, age, bio, profileEmoji } = user;
    try {
        await db.user.create({ data: user });
        return user;
    }
    catch (err) {
        console.log('MySQL error: ', err);
        return null;
    }
}
exports.default = createUser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlVXNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNyZWF0ZVVzZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx3QkFBd0I7QUFDeEIsNkJBQTRCO0FBRzVCLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBRXBDLEtBQUssVUFBVSxVQUFVLENBQUMsSUFBVTtJQUNoQyxNQUFNLEVBQUUsR0FBRyxNQUFNLFVBQUssRUFBRSxDQUFBO0lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUE7SUFDOUIsTUFBTSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxZQUFZLEVBQUUsR0FBRyxJQUFJLENBQUE7SUFDckQsSUFBSTtRQUNBLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQTtRQUNuQyxPQUFPLElBQUksQ0FBQTtLQUNkO0lBQUMsT0FBTyxHQUFHLEVBQUU7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUNqQyxPQUFPLElBQUksQ0FBQTtLQUNkO0FBQ0wsQ0FBQztBQUVELGtCQUFlLFVBQVUsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBkYiBmcm9tICcuL2RiJ1xuaW1wb3J0IHsgZ2V0REIgfSBmcm9tICcuL2RiJ1xuaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJ1xuaW1wb3J0IHsgY3JlYXRlVXNlclF1ZXJ5IH0gZnJvbSAnLi9zcWxDb21tYW5kcydcbmNvbnN0IHsgdjQ6IHV1aWQgfSA9IHJlcXVpcmUoJ3V1aWQnKVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKHVzZXI6IFVzZXIpIHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERCKClcbiAgICBpZiAoIXVzZXIuaWQpIHVzZXIuaWQgPSB1dWlkKClcbiAgICBjb25zdCB7IGlkLCB1c2VybmFtZSwgYWdlLCBiaW8sIHByb2ZpbGVFbW9qaSB9ID0gdXNlclxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGRiLnVzZXIuY3JlYXRlKHsgZGF0YTogdXNlcn0pXG4gICAgICAgIHJldHVybiB1c2VyXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNeVNRTCBlcnJvcjogJywgZXJyKVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlVXNlciJdfQ==